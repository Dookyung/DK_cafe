<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="generator" content="Hugo 0.35" />

  <title>R Package 만들기 1 &middot; Big Data Analytics with R</title>

  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/pure-min.css">

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-old-ie-min.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-min.css">
  <!--<![endif]-->

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="../../css/side-menu-old-ie.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="../../css/side-menu.css">
  <!--<![endif]-->

  <link rel="stylesheet" href="../../css/blackburn.css">
  <link rel="stylesheet" href="../../css/schedule.css">
  <link rel="stylesheet" href="../../css/menu.css">

  
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.10/css/all.css">

  
  <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" type="text/css">

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

 
  

  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/androidstudio.min.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  
  <script>hljs.initHighlightingOnLoad();</script>
  

  <link rel="shortcut icon" href="../../img/favicon.ico" type="image/x-icon" />

  
  

</head>


<body>
<div id="layout">

  
<a href="#menu" id="menuLink" class="menu-link">
  
  <span></span>
</a>
<div id="menu">

  
  <a class="pure-menu-heading brand" href="../../">DK Cafe</a>


  <div class="pure-menu">
    <ul class="pure-menu-list">
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="../../"><i class='fa fa-home fa-fw'></i>Blog</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="../../schedule/"><i class='fa fa-calendar-check'></i>Schedule</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="../../syllabus/"><i class='fa fa-calendar-check'></i>R4DS Course</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="../../post/"><i class='fa fa-list fa-fw'></i>Posts</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://dkkim.netlify.com/"><i class='fa fa-user fa-fw'></i>About</a>
      
        </li>
      
    </ul>
  </div>

  <div class="pure-menu social">
  <ul class="pure-menu-list">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

  </ul>
</div>


  <div>
  <div class="small-print">
    <small></small>
  </div>
  <div class="small-print">
    <small>Built with&nbsp;<a href="https://gohugo.io/" target="_blank">Hugo</a></small>
    <small>Theme&nbsp;<a href="https://github.com/yoshiharuyamashita/blackburn" target="_blank">Blackburn</a></small>
  </div>
</div>

</div>


  <div id="main">


<div class="header">
  <h1>R Package 만들기 1</h1>
  <h2></h2>
</div>
<div class="content">

  <div class="post-meta">

  <div>
    <i class="fa fa-calendar fa-fw"></i>
    <time>Jun 06</time>
  </div>

  

  

  
  
  
  <div>
    <i class="fa fa-tags fa-fw"></i>
    
      <a class="post-taxonomy-tag" href="../../tags/devtools">devtools</a>
    
  </div>
  
  

</div>

  <div id="creating-my-own-r-package" class="section level1">
<h1>Creating My Own R Package</h1>
<p>조직내에서 R을 체계적으로 활용하기 위해서는 R 스크립트의 재사용, 체계적 주석, 유지보수, 온라인 배포 등을 위해 R 패키지를 작성하여 배포하는 방식이 편리하다. 이에 이번 포스팅에서는 R 패키지를 만들고 배포하는 방법을 설명하고자 합니다.</p>
<div id="----" class="section level2">
<h2>필요한 패키지 설치 및 로딩</h2>
<p>R 패키지를 만들기 위해 필요한 devtools와 roxygen2을 설치하고 불러옵니다.</p>
<pre class="r"><code>if (! (&quot;devtools&quot; %in% rownames(installed.packages()))) { install.packages(&quot;devtools&quot;) }
base::require(&quot;devtools&quot;)
## Loading required package: devtools
 
if (! (&quot;roxygen2&quot; %in% rownames(installed.packages()))) { install.packages(&quot;roxygen2&quot;) }
base::require(&quot;roxygen2&quot;)
## Loading required package: roxygen2</code></pre>
</div>
<div id="--" class="section level2">
<h2>패키지 이름 정하기</h2>
<p>패키지의 이름은 r4me라고 하겠다. 패키지의 이름은 소문자와 숫자만을 쓰는 것이 좋다.</p>
</div>
<div id="-github-" class="section level2">
<h2>패키지와 github 연결하기</h2>
<p>이번 포스팅의 목표는 깃허브와 연동된 R패키지 프로젝트를 생성하는 것이다.</p>
<div id="step1.-r-package--" class="section level3">
<h3>Step1. R package 프로젝트 생성</h3>
<ul>
<li>File &gt; New Project &gt; R package 에서 자신의 패키지 이름과 패키지 작업이 이루어질 경로를 설정 한 후, create project 클릭하자.</li>
</ul>
<p>그림</p>
<ul>
<li>위의 과정을 마치면 hello.R의 내용이 열리면서 다음과 같은 구조의 폴더로 이동하게 된다. hello() 함수는 우리의 패키지에 들어가게 될 테스트 함수로서 코드는 아래와 같은 프린트 함수이다. 이 포스팅의 마지막에 우리가 세팅한 패키지가 잘 작동한다면, 위의 함수를 실행시켰을 경우 잘 작동할 것이다.</li>
</ul>
<pre class="r"><code>hello &lt;- function() { 
    print(&quot;Hello, world!&quot;)
    }</code></pre>
<p>그림</p>
<p>앞에서 git repository를 연결하지 않음을 설정하였으므로, Environment, History, Build 탭에 Git 탭이 보이지 않는다. Github와 Rstudio를 연결하게되면 Git 폴더가 생성된다. 우리의 목표는 팩키지 빌드를 위한 Build 탭과 버전 관리를 위한 Git 탭을 동시에 활성화 시키는 것이다.</p>
</div>
<div id="step2.--repository-" class="section level3">
<h3>Step2. 깃허브 repository 생성</h3>
<p>깃허브 홈페이지에 가서 자신의 account에 패키지 이름과 똑같은 이름의 repository를 생성한다. 깃허브의 초기화면에서 create new repository를 누르면 아래의 화면과 같이 생성정보 입력화면이 나오게 된다.</p>
<p>그림</p>
<p>위의 과정을 마치면 다음과 같이 깃허브에 repository가 생성이 되어있을 것이다. 이것으로 깃허브의 repository도 생성을 마쳤다.</p>
</div>
<div id="step3.-r---" class="section level3">
<h3>Step3. R패키지 폴더 이름 바꾸기</h3>
<p>이 부분이 필자가 사용하는 방법의 가장 편법인데, 생성시킨 패키지 폴더인 r4issactoast폴더의 이름을 바꿔준다. 이유는 Rstudio가 깃허브 repository 연동기능을 빈 폴더에 연동시키는 방법밖에 지원하지않기 때문이다. 따라서 Step1에서 생성한 팩키지 폴더 r4issactoast의 이름을 r4issactoast_pack으로 바꿔주었다.</p>
</div>
<div id="step4.--rstudio-" class="section level3">
<h3>Step4. 깃허브와 Rstudio 연동하기</h3>
<ul>
<li>Step2에서 만들었던 깃허브의 패키지 repository로 이동하여 녹색의 clone and download버튼을 클릭하여 나오는 주소를 복사한다. 오른쪽에 보이는 복사버튼을 누르면 복사가 된다. (만약 자신이 SSH를 연동하지 않았다면 HTTPS의 주소가 나올텐데 당황하지말고 그냥 나오는 주소를 복사하면 된다. 하지만 SSH키는 연동해놓는 것이 편하므로 나중에라도 연동을 해놓는 것을 추천한다. 다음 링크)의 1~5를 따라 하자.)</li>
</ul>
<p>그림</p>
<ul>
<li>File &gt; New Project &gt; Version Control &gt; Git을 누르면 아래와 같은 화면이 보이는데, 첫번째란 위에서 복사한 주소를 붙여넣는다.</li>
</ul>
<p>그림</p>
<p>정보를 입력한 후 Create Project 버튼을 누르면, 자신이 설정한 repository(패키지 이름과 동일한)의 이름의 폴더가 생성되면서 프로젝트 파일이 활성화 된다. 그리고 아래의 구조와 같은 세개의 파일이 폴더에 들어있을 것이다.</p>
<p>그림</p>
<p>이번에는 Build탭 대신에 Git탭이 생겨난 것을 확인 할 수있다. 이제 우리는 두 개의 폴더를 만든 셈인데, 필자의 경우는 r4issactoast와 r4issactoast_pack 두 개의 폴더가 존재하는 셈이다.</p>
<p>그림</p>
</div>
<div id="step5.---proj.r--" class="section level3">
<h3>Step5. 폴더 합치기와 proj.R 파일 조정</h3>
<p>마지막 단계는 r4issactoast_pack 폴더 안의 모든 파일을 r4issactoast 폴더로 잘라내어 붙여넣기 한다. 두 폴더는 r4issactoast.Proj을 가지고 있어서 파일을 교체할것인지 물을 것이다. 꼭 파일을 덮어쓴다고 설정해야 한다. r4issactoast.Proj를 덮어쓰지 않을 경우 Build탭이 나타나지 않으므로 유의한다. 복사를 완료한 후 _pack이 붙어있는 빈 폴더는 삭제해도 좋다.</p>
</div>
</div>
<div id="--" class="section level2">
<h2>패키지 연동 조절하기</h2>
<p>이제 r4issactoast.Proj를 열게 되면 자동으로 프로젝트 모드로 들어가게 되면서 아래와 같이 빌드 탭과 깃 탭이 동시에 활성화 되어있는 것을 볼 수 있다.</p>
<p>자, 마지막 설정만이 남았다. 폴더의 파일 목록을 확인해보면 .gitignore와 .Rbuildignore가 보일 것이다. 이 파일의 내용을 수정해줘야 한다. .gitignore의 경우는 버전 컨트롤을 할 것인지, 즉 깃허브와 연동을 하지 않을 파일 목록을 써주면 된다. 비슷하게 .Rbuildignore의 경우는 팩키지를 빌드할 경우 무시할 파일명을 관리하는 파일이다.</p>
<ul>
<li>.gitignore의 내용을 다음과 같이 설정한다.</li>
</ul>
<pre><code>.Rproj.user 
.Rhistory 
.RData 
.Ruserdata 
r4issactoast.Rproj 
.gitignore
</code></pre>
<p>즉, 마지막 두 줄을 추가하는데 프로젝트 파일과 .gitignore 자기 자신을 넣어준다. 저장을 하면 Fig9과 같이 git탭에 보이는 commit 리스트에 두 개의 파일이 사라지는 것을 알 수 있다.</p>
<ul>
<li>.Rbuildignore의 내용을 다음과 같이 설정한다.</li>
</ul>
<pre><code>^.*\.Rproj$ # Automatically added by RStudio, 
^\.Rproj\.user$ 

# Github stuffs 
.gitignore 
README.md 
.Rhistory
</code></pre>
<p>그림</p>
<p>이제 깃허브로 첫 커밋을 해보자. 커밋 버튼을 누른 후 파일들을 모두 체크하고 myfirst commit이라는 내용으로 커밋을 완료한 후 push 버튼을 누른다.</p>
<p>그림</p>
<p>만약 모든것이 잘 되었다면 아래의 화면이 보일 것이다.</p>
<p>그림</p>
<p>이제 우리들의 첫 R패키지가 준비가 되었다. 아래의 코드를 자신의 패키지 이름에 맞게 수정한 뒤 설치하자. 그리고 패키지를 불러와 함수가 잘 작동하는지 확인해보자!</p>
<pre class="r"><code>devtools::install_github(&quot;Dookyung/R4me&quot;)</code></pre>
<pre class="r"><code>library(R4me)
hello()</code></pre>
</div>
</div>


  
<div class="prev-next-post pure-g">
  <div class="pure-u-1-24" style="text-align: left;">
    
    <a href="../../post/2018-04-29-database-sql/"><i class="fa fa-chevron-left"></i></a>
    
  </div>
  <div class="pure-u-10-24">
    
    <nav class="prev">
      <a href="../../post/2018-04-29-database-sql/">Introduction</a>
    </nav>
    
  </div>
  <div class="pure-u-2-24">
    &nbsp;
  </div>
  <div class="pure-u-10-24">
    
    <nav class="next">
      <a href="../../post/2018-06-07-r-package6/">R Package 만들기 5</a>
    </nav>
    
  </div>
  <div class="pure-u-1-24" style="text-align: right;">
    
    <a href="../../post/2018-06-07-r-package6/"><i class="fa fa-chevron-right"></i></a>
    
  </div>
</div>



  
<div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    if (window.location.hostname == "localhost")
        return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'Your Disqus shortname';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


</div>

</div>
</div>
<script src="../../js/ui.js"></script>






</body>
</html>

